  <!-- CORE -->
  <script src="scripts/core/init.js" defer></script>
  <script src="scripts/core/history.js" defer></script>
  <script src="scripts/core/showQuestion.js" defer></script>

  <!-- DATA -->
  <script src="data/debut.text.js" defer></script>
  <script src="data/hardcore.text.js" defer></script>
  <script src="data/alcool.text.js" defer></script>
  <script src="data/culture.text.js" defer></script>
  <script src="data/culture.mcq.js" defer></script>

  <!-- PATCHES (facultatif) -->
  <script src="patches/apero-fixes.js" defer></script>
    // BEGIN jdd-sync-players
    if (window.JDD) {
      JDD.players = players;
    }
    const pickText = (window.JDD && typeof JDD.pickText === "function")
      ? JDD.pickText
      : function(pool){
          const arr = Array.isArray(pool) ? pool : [];
          const raw = arr[Math.floor(Math.random()*arr.length)] || "VÉRITÉ|{player}, raconte un truc marrant.";
          return String(raw).split("|");
        };
    // END jdd-sync-players
      else if(mode==="debut"||mode==="hardcore"||mode==="alcool"){const pool={debut:debutQuestions,hardcore:hardcoreQuestions,alcool:alcoolQuestions}[mode];const [type,text]=pickText(pool);let player=(JDD&&typeof JDD.pickWithHistory==="function")?JDD.pickWithHistory():players[Math.floor(Math.random()*players.length)];let qText=text.replace(/\{player\}/g,player);if(qText.includes("{other}")){let other;do{other=(JDD&&typeof JDD.pickWithHistory==="function")?JDD.pickWithHistory([player],{register:false}):players[Math.floor(Math.random()*players.length)];}while(other===player&&players.length>1);if(!other)other=player;qText=qText.replace(/\{other\}/g,other);}typeBox.textContent=type;setBackground(type);currentQuestionEl.textContent=qText;}}
